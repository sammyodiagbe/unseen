{"version":3,"sources":["components/landing.js","components/partials/message.js","components/pages/dashboard.js","components/pages/signup.js","components/pages/new_message.js","App.js","index.js"],"names":["LandingPage","useState","username","setUsername","password","setPassword","authState","setAuthState","login","event","a","preventDefault","data","fetch","method","cache","mode","credentials","headers","body","JSON","stringify","then","response","json","console","log","localStorage","setItem","catch","err","to","className","id","onSubmit","htmlFor","type","placeholder","value","onChange","e","target","href","timeSince","date","seconds","Math","floor","Date","getTime","interval","Messages","user","messages","setMessages","useEffect","url","redirect","getMessages","length","map","entry","index","message","time","Dashboard","props","getItem","linkInputRef","useRef","copied","setCopied","ref","onChnage","rows","readOnly","onClick","current","select","window","document","execCommand","Signup","accountCreated","setAccountCreated","handleAccountCreation","autoComplete","withRouter","setMessage","target_user","match","params","SendMessage","trim","now","disabled","maxLength","App","this","history","push","Component","Wrapper","path","exact","component","NewMessage","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.40e87140.chunk.js","sourcesContent":["import React, { useState } from \"react\";\nimport { Redirect } from \"react-router-dom\";\n\nconst LandingPage = () => {\n  const [username, setUsername] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  let [authState, setAuthState] = useState(false);\n  const login = async (event) => {\n    event.preventDefault();\n\n    const loginApiUrl = \"http://192.168.43.50:9000/auth/login\";\n    const data = { username, password };\n    await fetch(loginApiUrl, {\n      method: \"POST\",\n      cache: \"no-cache\",\n      mode: \"cors\",\n      credentials: \"same-origin\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify(data),\n    })\n      .then((response) => response.json())\n      .then((data) => {\n        console.log(data);\n        localStorage.setItem(\"active_user_ddg\", username);\n        setAuthState(true);\n      })\n      .catch((err) => console.log(err));\n  };\n\n  if (authState) return <Redirect to=\"/dashboard\" />;\n  return (\n    <div className=\"annonymous\">\n      <div className=\"image-container\">\n        <h2>Tell your friends to send secret messages</h2>\n        <p>Create an account to get started</p>\n      </div>\n      <div className=\"auth-container\">\n        <h2 className=\"title\">Login</h2>\n        <form id=\"login-in\" onSubmit={login}>\n          <div>\n            <label htmlFor=\"username\">Username</label>\n            <div>\n              <input\n                type=\"text\"\n                placeholder=\"Username\"\n                id=\"username\"\n                className=\"input\"\n                value={username}\n                onChange={(e) => setUsername(e.target.value)}\n              />\n            </div>\n          </div>\n          <div>\n            <label htmlFor=\"username\">Password</label>\n            <div>\n              <input\n                type=\"password\"\n                placeholder=\"Password\"\n                id=\"password\"\n                className=\"input\"\n                value={password}\n                onChange={(e) => setPassword(e.target.value)}\n              />\n            </div>\n          </div>\n          <div>\n            <button className=\"submit-button\">Sign in</button>\n          </div>\n          <div>\n            <p>\n              Don't have an account ?,\n              <a href=\"http://192.168.43.50:3000/create-account\">Signup</a>\n            </p>\n          </div>\n        </form>\n      </div>\n    </div>\n  );\n};\n\nexport default LandingPage;\n","import React, { useState, useEffect } from \"react\";\n\nfunction timeSince(date) {\n  console.log(typeof date);\n  var seconds = Math.floor((new Date() - new Date(date).getTime()) / 1000);\n\n  var interval = seconds / 31536000;\n\n  if (interval > 1) {\n    return Math.floor(interval) + \" years\";\n  }\n  interval = seconds / 2592000;\n  if (interval > 1) {\n    return Math.floor(interval) + \" months\";\n  }\n  interval = seconds / 86400;\n  if (interval > 1) {\n    return Math.floor(interval) + \" days\";\n  }\n  interval = seconds / 3600;\n  if (interval > 1) {\n    return Math.floor(interval) + \" hours\";\n  }\n  interval = seconds / 60;\n  if (interval > 1) {\n    return Math.floor(interval) + \" minutes\";\n  }\n  return Math.floor(seconds) + \" seconds\";\n}\nconst Messages = ({ user }) => {\n  const [messages, setMessages] = useState([]);\n  useEffect(() => {\n    async function getMessages() {\n      const url = `http://192.168.43.50:9000/messages/allMessages?username=${user}`;\n      await fetch(url, {\n        credentials: \"same-origin\",\n        mode: \"cors\",\n        method: \"GET\",\n        cache: \"no-cache\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        redirect: \"follow\",\n      })\n        .then((response) => response.json())\n        .then((data) => {\n          setMessages(data.messages);\n        })\n        .catch((err) => console.log(err));\n    }\n    getMessages();\n  }, []);\n  const renderMessages = messages.length ? (\n    messages.map((entry, index) => {\n      const { message, time } = entry;\n      return (\n        <div className=\"anonymous_message\" key={index}>\n          <h3 className=\"message\">{message}</h3>\n          <p className=\"time\">{timeSince(time)} ago by anonymous</p>\n        </div>\n      );\n    })\n  ) : (\n    <p>You don't have any messages, try sharing your url with friends</p>\n  );\n\n  return renderMessages;\n};\n\nexport default Messages;\n","import React, { useRef, useState } from \"react\";\nimport Messages from \"../partials/message\";\nimport \"../../styles/dashboard.css\";\nimport { Redirect } from \"react-router-dom\";\n\nconst Dashboard = (props) => {\n  const username = localStorage.getItem(\"active_user_ddg\");\n  const linkInputRef = useRef(null);\n  const [copied, setCopied] = useState(false);\n  if (!localStorage.getItem(\"active_user_ddg\")) {\n    return <Redirect to=\"/\" />;\n  }\n  return (\n    <div className=\"user-dashboard\">\n      {/* <div className=\"left\">\n        <nav className=\"navigation\">\n          <a href=\"/\" className=\"brand\">\n            Unseen\n          </a>\n        </nav>\n      </div> */}\n\n      <h3 className=\"header\">Hi, {username}</h3>\n      <div className=\"share-link\">\n        <h3>Share link with friends</h3>\n        <div className=\"link-container\">\n          <textarea\n            ref={linkInputRef}\n            type=\"text\"\n            value={`Write a secret message to me, I won't know who wrote it, copy my link below \\nhttp://192.168.43.50:3000/new-message/${username}`}\n            onChnage={() => {}}\n            rows={4}\n            readOnly={true}\n          ></textarea>\n          <button\n            onClick={() => {\n              linkInputRef.current.select();\n              window.document.execCommand(\"copy\");\n              setCopied(true);\n            }}\n          >\n            {copied ? \"Copied\" : \"Copy\"}\n          </button>\n        </div>\n      </div>\n      <div className=\"messages-container\">\n        <h2>Your secret Messages</h2>\n        <Messages user={username} />\n      </div>\n    </div>\n  );\n};\n\nexport default Dashboard;\n","import React, { useState } from \"react\";\nimport { Redirect } from \"react-router-dom\";\nimport \"../../styles/signup.css\";\n\nconst Signup = () => {\n  const [username, setUsername] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [accountCreated, setAccountCreated] = useState(false);\n  const handleAccountCreation = async (event) => {\n    event.preventDefault();\n    const signupApiUrl = \"http://192.168.43.50:9000/auth/signup\";\n    const data = { username, password };\n    await fetch(signupApiUrl, {\n      method: \"POST\",\n      cache: \"no-cache\",\n      mode: \"cors\",\n      credentials: \"same-origin\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify(data),\n    })\n      .then((response) => response.json())\n      .then((data) => {\n        setAccountCreated(true);\n      });\n  };\n  if (localStorage.getItem(\"active_user_ddg\") || accountCreated) {\n    return <Redirect to=\"/dashboard\" />;\n  }\n  return (\n    <div className=\"auth-container\">\n      <h2 className=\"title\">Create your account..</h2>\n      <form id=\"create-account\" onSubmit={handleAccountCreation}>\n        <div>\n          <label htmlFor=\"username\">Username</label>\n          <div>\n            <input\n              type=\"text\"\n              placeholder=\"Username\"\n              id=\"username\"\n              className=\"input\"\n              value={username}\n              onChange={(e) => setUsername(e.target.value)}\n            />\n          </div>\n        </div>\n        <div>\n          <label htmlFor=\"username\">Password</label>\n          <div>\n            <input\n              type=\"password\"\n              placeholder=\"Password\"\n              id=\"password\"\n              className=\"input\"\n              autoComplete=\"current-password\"\n              value={password}\n              onChange={(e) => setPassword(e.target.value)}\n            />\n          </div>\n        </div>\n        <div>\n          <button className=\"submit-button\">Sign up</button>\n        </div>\n        <div>\n          <p>\n            Own an account?, <a href=\"http://localhost:3000\">Login</a>\n          </p>\n        </div>\n      </form>\n    </div>\n  );\n};\n\nexport default Signup;\n","import React, { useState } from \"react\";\nimport { withRouter } from \"react-router-dom\";\nimport \"../../styles/new_message.css\";\n\nconst NewMessage = (props) => {\n  console.log(props);\n  const [message, setMessage] = useState(\"\");\n  const username = localStorage.getItem(\"active_user_ddg\");\n  const { target_user } = props.match.params;\n  const SendMessage = async (event) => {\n    event.preventDefault();\n    if (message.trim() === \"\") return;\n    const url = \"http://192.168.43.50:9000/messages/send\";\n    const data = { message, time: Date.now(), target_user: target_user };\n    await fetch(url, {\n      credentials: \"same-origin\",\n      mode: \"cors\",\n      method: \"POST\",\n      cache: \"no-cache\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      redirect: \"follow\",\n      body: JSON.stringify(data),\n    })\n      .then((response) => response.json())\n      .then((data) => console.log(data))\n      .catch((err) => console.log(err));\n  };\n  return (\n    <div className=\"new-message\">\n      <h2 className=\"title\">Hi, {username} ?</h2>\n      <div className=\"form-container\">\n        <p>\n          Don't worry <b>{username}</b>, we won't tell <b>{target_user}</b> it\n          was you.\n        </p>\n        {target_user ? (\n          <form onSubmit={SendMessage}>\n            <div>\n              <label htmlFor=\"message\">Your message</label>\n              <textarea\n                value={\n                  target_user === username\n                    ? `You can't send messages to yourself`\n                    : message\n                }\n                onChange={(event) => setMessage(event.target.value)}\n                placeholder=\"Your message\"\n                rows={10}\n                readOnly={target_user === username}\n                disabled={target_user === username}\n                maxLength={500}\n              ></textarea>\n            </div>\n            <div>\n              <button className=\"submit\" disabled={target_user === username}>\n                {target_user === username\n                  ? `You can't send message to yourself `\n                  : \"Send Anonymous Message\"}\n              </button>\n            </div>\n          </form>\n        ) : (\n          <p>\n            You have submitted an invalid target user or invalid Url, try\n            getting a valid username\n          </p>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default withRouter(NewMessage);\n","import { Component } from \"react\";\nimport { BrowserRouter as Router, Route, Switch } from \"react-router-dom\";\nimport LandingPage from \"./components/landing\";\nimport Dashboard from \"./components/pages/dashboard\";\nimport Signup from \"./components/pages/signup\";\nimport NewMessage from \"./components/pages/new_message\";\n\nclass App extends Component {\n  componentDidMount() {\n    let user = localStorage.getItem(\"active_user_ddg\");\n    if (user) {\n      this.props.history.push(\"/dashboard\");\n    }\n  }\n  render() {\n    return <LandingPage />;\n  }\n}\n\nconst Wrapper = () => {\n  return (\n    <Router>\n      <div className=\"App\">\n        <Switch>\n          <Route path=\"/\" exact component={App} />\n          <Route path=\"/create-account\" exact component={Signup} />\n          <Route path=\"/dashboard\" exact component={Dashboard} />\n          <Route\n            path=\"/new-message/:target_user\"\n            exact\n            component={NewMessage}\n          />\n        </Switch>\n      </div>\n    </Router>\n  );\n};\n\nexport default Wrapper;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\nimport \"./styles/index.css\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}