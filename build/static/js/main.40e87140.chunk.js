(this.webpackJsonpreact_anonymous=this.webpackJsonpreact_anonymous||[]).push([[0],{35:function(e,t,n){},36:function(e,t,n){},37:function(e,t,n){},38:function(e,t,n){},39:function(e,t,n){"use strict";n.r(t);var s=n(0),c=n(1),a=n.n(c),r=n(18),o=n.n(r),i=n(19),u=n(20),l=n(23),d=n(22),j=n(11),h=n(2),b=n(7),m=n.n(b),p=n(9),O=n(4),x=function(){var e=Object(c.useState)(""),t=Object(O.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)(""),o=Object(O.a)(r,2),i=o[0],u=o[1],l=Object(c.useState)(!1),d=Object(O.a)(l,2),j=d[0],b=d[1],x=function(){var e=Object(p.a)(m.a.mark((function e(t){var s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),"http://192.168.43.50:9000/auth/login",s={username:n,password:i},e.next=5,fetch("http://192.168.43.50:9000/auth/login",{method:"POST",cache:"no-cache",mode:"cors",credentials:"same-origin",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}).then((function(e){return e.json()})).then((function(e){console.log(e),localStorage.setItem("active_user_ddg",n),b(!0)})).catch((function(e){return console.log(e)}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return j?Object(s.jsx)(h.a,{to:"/dashboard"}):Object(s.jsxs)("div",{className:"annonymous",children:[Object(s.jsxs)("div",{className:"image-container",children:[Object(s.jsx)("h2",{children:"Tell your friends to send secret messages"}),Object(s.jsx)("p",{children:"Create an account to get started"})]}),Object(s.jsxs)("div",{className:"auth-container",children:[Object(s.jsx)("h2",{className:"title",children:"Login"}),Object(s.jsxs)("form",{id:"login-in",onSubmit:x,children:[Object(s.jsxs)("div",{children:[Object(s.jsx)("label",{htmlFor:"username",children:"Username"}),Object(s.jsx)("div",{children:Object(s.jsx)("input",{type:"text",placeholder:"Username",id:"username",className:"input",value:n,onChange:function(e){return a(e.target.value)}})})]}),Object(s.jsxs)("div",{children:[Object(s.jsx)("label",{htmlFor:"username",children:"Password"}),Object(s.jsx)("div",{children:Object(s.jsx)("input",{type:"password",placeholder:"Password",id:"password",className:"input",value:i,onChange:function(e){return u(e.target.value)}})})]}),Object(s.jsx)("div",{children:Object(s.jsx)("button",{className:"submit-button",children:"Sign in"})}),Object(s.jsx)("div",{children:Object(s.jsxs)("p",{children:["Don't have an account ?,",Object(s.jsx)("a",{href:"http://192.168.43.50:3000/create-account",children:"Signup"})]})})]})]})]})};function f(e){console.log(typeof e);var t=Math.floor((new Date-new Date(e).getTime())/1e3),n=t/31536e3;return n>1?Math.floor(n)+" years":(n=t/2592e3)>1?Math.floor(n)+" months":(n=t/86400)>1?Math.floor(n)+" days":(n=t/3600)>1?Math.floor(n)+" hours":(n=t/60)>1?Math.floor(n)+" minutes":Math.floor(t)+" seconds"}var g=function(e){var t=e.user,n=Object(c.useState)([]),a=Object(O.a)(n,2),r=a[0],o=a[1];return Object(c.useEffect)((function(){function e(){return(e=Object(p.a)(m.a.mark((function e(){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="http://192.168.43.50:9000/messages/allMessages?username=".concat(t),e.next=3,fetch(n,{credentials:"same-origin",mode:"cors",method:"GET",cache:"no-cache",headers:{"Content-Type":"application/json"},redirect:"follow"}).then((function(e){return e.json()})).then((function(e){o(e.messages)})).catch((function(e){return console.log(e)}));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),r.length?r.map((function(e,t){var n=e.message,c=e.time;return Object(s.jsxs)("div",{className:"anonymous_message",children:[Object(s.jsx)("h3",{className:"message",children:n}),Object(s.jsxs)("p",{className:"time",children:[f(c)," ago by anonymous"]})]},t)})):Object(s.jsx)("p",{children:"You don't have any messages, try sharing your url with friends"})},v=(n(35),function(e){var t=localStorage.getItem("active_user_ddg"),n=Object(c.useRef)(null),a=Object(c.useState)(!1),r=Object(O.a)(a,2),o=r[0],i=r[1];return localStorage.getItem("active_user_ddg")?Object(s.jsxs)("div",{className:"user-dashboard",children:[Object(s.jsxs)("h3",{className:"header",children:["Hi, ",t]}),Object(s.jsxs)("div",{className:"share-link",children:[Object(s.jsx)("h3",{children:"Share link with friends"}),Object(s.jsxs)("div",{className:"link-container",children:[Object(s.jsx)("textarea",{ref:n,type:"text",value:"Write a secret message to me, I won't know who wrote it, copy my link below \nhttp://192.168.43.50:3000/new-message/".concat(t),onChnage:function(){},rows:4,readOnly:!0}),Object(s.jsx)("button",{onClick:function(){n.current.select(),window.document.execCommand("copy"),i(!0)},children:o?"Copied":"Copy"})]})]}),Object(s.jsxs)("div",{className:"messages-container",children:[Object(s.jsx)("h2",{children:"Your secret Messages"}),Object(s.jsx)(g,{user:t})]})]}):Object(s.jsx)(h.a,{to:"/"})}),y=(n(36),function(){var e=Object(c.useState)(""),t=Object(O.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)(""),o=Object(O.a)(r,2),i=o[0],u=o[1],l=Object(c.useState)(!1),d=Object(O.a)(l,2),j=d[0],b=d[1],x=function(){var e=Object(p.a)(m.a.mark((function e(t){var s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),"http://192.168.43.50:9000/auth/signup",s={username:n,password:i},e.next=5,fetch("http://192.168.43.50:9000/auth/signup",{method:"POST",cache:"no-cache",mode:"cors",credentials:"same-origin",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}).then((function(e){return e.json()})).then((function(e){b(!0)}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return localStorage.getItem("active_user_ddg")||j?Object(s.jsx)(h.a,{to:"/dashboard"}):Object(s.jsxs)("div",{className:"auth-container",children:[Object(s.jsx)("h2",{className:"title",children:"Create your account.."}),Object(s.jsxs)("form",{id:"create-account",onSubmit:x,children:[Object(s.jsxs)("div",{children:[Object(s.jsx)("label",{htmlFor:"username",children:"Username"}),Object(s.jsx)("div",{children:Object(s.jsx)("input",{type:"text",placeholder:"Username",id:"username",className:"input",value:n,onChange:function(e){return a(e.target.value)}})})]}),Object(s.jsxs)("div",{children:[Object(s.jsx)("label",{htmlFor:"username",children:"Password"}),Object(s.jsx)("div",{children:Object(s.jsx)("input",{type:"password",placeholder:"Password",id:"password",className:"input",autoComplete:"current-password",value:i,onChange:function(e){return u(e.target.value)}})})]}),Object(s.jsx)("div",{children:Object(s.jsx)("button",{className:"submit-button",children:"Sign up"})}),Object(s.jsx)("div",{children:Object(s.jsxs)("p",{children:["Own an account?, ",Object(s.jsx)("a",{href:"http://localhost:3000",children:"Login"})]})})]})]})}),w=(n(37),Object(h.g)((function(e){console.log(e);var t=Object(c.useState)(""),n=Object(O.a)(t,2),a=n[0],r=n[1],o=localStorage.getItem("active_user_ddg"),i=e.match.params.target_user,u=function(){var e=Object(p.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),""!==a.trim()){e.next=3;break}return e.abrupt("return");case 3:return"http://192.168.43.50:9000/messages/send",n={message:a,time:Date.now(),target_user:i},e.next=7,fetch("http://192.168.43.50:9000/messages/send",{credentials:"same-origin",mode:"cors",method:"POST",cache:"no-cache",headers:{"Content-Type":"application/json"},redirect:"follow",body:JSON.stringify(n)}).then((function(e){return e.json()})).then((function(e){return console.log(e)})).catch((function(e){return console.log(e)}));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(s.jsxs)("div",{className:"new-message",children:[Object(s.jsxs)("h2",{className:"title",children:["Hi, ",o," ?"]}),Object(s.jsxs)("div",{className:"form-container",children:[Object(s.jsxs)("p",{children:["Don't worry ",Object(s.jsx)("b",{children:o}),", we won't tell ",Object(s.jsx)("b",{children:i})," it was you."]}),i?Object(s.jsxs)("form",{onSubmit:u,children:[Object(s.jsxs)("div",{children:[Object(s.jsx)("label",{htmlFor:"message",children:"Your message"}),Object(s.jsx)("textarea",{value:i===o?"You can't send messages to yourself":a,onChange:function(e){return r(e.target.value)},placeholder:"Your message",rows:10,readOnly:i===o,disabled:i===o,maxLength:500})]}),Object(s.jsx)("div",{children:Object(s.jsx)("button",{className:"submit",disabled:i===o,children:i===o?"You can't send message to yourself ":"Send Anonymous Message"})})]}):Object(s.jsx)("p",{children:"You have submitted an invalid target user or invalid Url, try getting a valid username"})]})]})}))),S=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"componentDidMount",value:function(){localStorage.getItem("active_user_ddg")&&this.props.history.push("/dashboard")}},{key:"render",value:function(){return Object(s.jsx)(x,{})}}]),n}(c.Component),N=function(){return Object(s.jsx)(j.a,{children:Object(s.jsx)("div",{className:"App",children:Object(s.jsxs)(h.d,{children:[Object(s.jsx)(h.b,{path:"/",exact:!0,component:S}),Object(s.jsx)(h.b,{path:"/create-account",exact:!0,component:y}),Object(s.jsx)(h.b,{path:"/dashboard",exact:!0,component:v}),Object(s.jsx)(h.b,{path:"/new-message/:target_user",exact:!0,component:w})]})})})};n(38);o.a.render(Object(s.jsx)(a.a.StrictMode,{children:Object(s.jsx)(N,{})}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.40e87140.chunk.js.map